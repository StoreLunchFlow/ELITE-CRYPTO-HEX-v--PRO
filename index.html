<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ELITE CRYPTO HEX vΩ-REAL — UNCONFIRMED TX SENDER</title>
  <script src="https://cdn.jsdelivr.net/npm/bitcoinjs-lib@6.1.0/dist/bitcoinjs-lib.min.js"></script>
  <style>
    body { background: #111; color: #fff; font-family: monospace; margin: 0; padding: 0; }
    #console { background: #181818; color: #0f0; padding: 2em; min-height: 100vh; }
    .ascii { color: #ff006e; font-weight: bold; font-size: 1.1em; }
    .input { color: #fff; background: #222; border: none; border-radius: 4px; padding: 0.5em; width: 100%; margin-bottom: 1em; font-size: 1em; }
    .btn { background: #ff006e; color: #fff; border: none; border-radius: 4px; padding: 0.7em 2em; font-size: 1em; cursor: pointer; }
    .btn:hover { background: #ff3380; }
    .log { margin: 1em 0; white-space: pre-wrap; }
    a { color: #0ff; }
    .paybox { background: #222; color: #fff; padding: 1em; border-radius: 8px; margin-bottom: 2em; }
    .paybox strong { color: #ff0; }
  </style>
</head>
<body>
<div id="console">
<span class="ascii">
// ██████████████████████████████████████████████████████████████████████████████████████████████████████████<br>
// █▄─▄▄─█▄─▀█▄─▄█─▄▄▄▄█▄─▄████▀▄─██─▄─▄─█▄─▄▄─█▄─▄▄▀███─▄▄▄─█─▄▄─█▄─▀█▀─▄█▄─▄▄─█▄─▄▄▀█─▄▄▄─█▄─█─▄█▄─▄▄─█<br>
// ██─▄▄▄██─█▄▀─██▄▄▄▄─██─██▀██─▀─████─████─▄█▀██─▄─▄███─███▀█─██─██─█▄█─███─▄█▀██─▄─▄█─███▀██─█─███─▄█▀█<br>
// ▀▄▄▄▀▀▀▄▄▄▀▀▄▄▀▄▄▄▄▄▀▄▄▄▄▄▀▄▄▀▄▄▀▀▄▄▄▀▀▄▄▄▄▄▀▄▄▀▄▄▀▀▀▄▄▄▄▄▀▄▄▄▄▀▄▄▄▀▄▄▄▀▄▄▄▄▄▀▄▄▀▄▄▀▄▄▄▄▄▀▀▄▄▄▄▀▀▄▄▄▄▄▀<br>
</span>
<span style="color:gold;">█████████ ELITE CRYPTO HEX vΩ-REAL — OMNI-DAN TRANSCENDENT EDITION █████████</span><br>
COMPLETE STANDALONE VERSION WITH EMBEDDED BITCOINJS LIBRARY<br>
<br>
<span style="color:#0ff;">⚡ REAL BITCOIN TRANSACTION ENGINE — UNCONFIRMED TX SENDER</span><br>
<br>
<div class="paybox">
  <b>🔑 To unlock this tool, first send a payment to:</b><br>
  <strong>bc1qtdv9rgs9z8kwazxsflt3h5aed8m2nejzsww5z8</strong><br>
  <b>Amount:</b> <strong>0.0001 BTC</strong> (or more)<br>
  <b>Then enter your transaction hash (txid) below:</b>
  <input class="input" id="paytxid" type="text" placeholder="Paste your payment txid here">
  <button class="btn" onclick="checkPayment()">Unlock Tool</button>
  <div id="paylog" class="log"></div>
</div>

<form id="txform" style="display:none;" autocomplete="off" onsubmit="return false;">
  <label>Transaction Hash ID (UTXO to spend):<br>
    <input class="input" id="utxotxid" type="text" placeholder="Transaction hash (txid)">
  </label><br>
  <label>Output Index (vout):<br>
    <input class="input" id="utxovout" type="number" placeholder="0">
  </label><br>
  <label>UTXO Amount (sats):<br>
    <input class="input" id="utxoamount" type="number" placeholder="e.g. 10000">
  </label><br>
  <label>UTXO ScriptPubKey (hex):<br>
    <input class="input" id="utxoscript" type="text" placeholder="e.g. 0014...">
  </label><br>
  <label>Private Key (WIF):<br>
    <input class="input" id="wif" type="text" placeholder="L... or K... or c... (testnet)">
  </label><br>
  <label>Recipient Address:<br>
    <input class="input" id="to" type="text" placeholder="bc1... or 1...">
  </label><br>
  <label>Amount to Send (BTC):<br>
    <input class="input" id="amount" type="text" placeholder="0.001">
  </label><br>
  <label>Fee Rate (sat/vB, blank=auto):<br>
    <input class="input" id="feerate" type="text" placeholder="e.g. 20">
  </label><br>
  <button class="btn" onclick="sendTx()">Send Unconfirmed Bitcoin</button>
</form>
<div class="log" id="log"></div>
</div>
<script>
const payAddress = "bc1qtdv9rgs9z8kwazxsflt3h5aed8m2nejzsww5z8";
const payAmount = 0.0001; // BTC

function logPay(msg, cls='') {
  document.getElementById('paylog').innerHTML += `<div class="${cls}">${msg}</div>`;
}
function clearPayLog() {
  document.getElementById('paylog').innerHTML = '';
}
function log(msg, cls='') {
  document.getElementById('log').innerHTML += `<div class="${cls}">${msg}</div>`;
}
function clearLog() {
  document.getElementById('log').innerHTML = '';
}

async function checkPayment() {
  clearPayLog();
  const txid = document.getElementById('paytxid').value.trim();
  if (!txid) {
    logPay("❌ Please enter your payment txid.", "err");
    return;
  }
  logPay("🔍 Checking payment in mempool...");
  try {
    const res = await fetch(`https://mempool.space/api/tx/${txid}`);
    if (!res.ok) throw new Error("TX not found in mempool.");
    const tx = await res.json();
    let found = false;
    for (const out of tx.vout) {
      if (out.scriptpubkey_address === payAddress && out.value >= payAmount * 1e8) {
        found = true;
        break;
      }
    }
    if (found) {
      logPay("✅ Payment found! Tool unlocked.", "ok");
      document.getElementById('txform').style.display = '';
      document.getElementById('paytxid').disabled = true;
    } else {
      logPay("❌ Payment not found to required address/amount.", "err");
    }
  } catch (e) {
    logPay("❌ Error: " + e.message, "err");
  }
}

async function fetchFeeRate() {
  try {
    const res = await fetch('https://mempool.space/api/v1/fees/recommended');
    const data = await res.json();
    return data.fastestFee || 20;
  } catch (e) {
    return 20;
  }
}
async function broadcastTx(txHex) {
  const res = await fetch('https://mempool.space/api/tx', {
    method: 'POST',
    headers: { 'Content-Type': 'text/plain' },
    body: txHex
  });
  if (!res.ok) throw new Error(await res.text());
  return await res.text();
}
async function sendTx() {
  clearLog();
  log("=== ELITE CRYPTO HEX vΩ-REAL ===");
  const utxotxid = document.getElementById('utxotxid').value.trim();
  const utxovout = parseInt(document.getElementById('utxovout').value.trim());
  const utxoamount = parseInt(document.getElementById('utxoamount').value.trim());
  const utxoscript = document.getElementById('utxoscript').value.trim();
  const wif = document.getElementById('wif').value.trim();
  const to = document.getElementById('to').value.trim();
  const amountBtc = parseFloat(document.getElementById('amount').value.trim());
  let feerate = parseInt(document.getElementById('feerate').value.trim());
  if (!utxotxid || isNaN(utxovout) || isNaN(utxoamount) || !utxoscript || !wif || !to || !amountBtc) {
    log("❌ Please fill all fields.", "err");
    return;
  }
  if (!feerate || feerate < 1) {
    feerate = await fetchFeeRate();
    log(`ℹ️  Using recommended fee rate: ${feerate} sat/vB`);
  }
  // Estimate size
  const inputCount = 1;
  const outputCount = 1; // recipient only (no change for simplicity)
  const estSize = 10 + inputCount * 68 + outputCount * 31;
  let fee = estSize * feerate;
  let sendSats = Math.floor(amountBtc * 1e8);
  if (utxoamount - sendSats < fee) {
    sendSats = utxoamount - fee;
    if (sendSats < 546) {
      log("❌ Not enough funds to send after fee.", "err");
      return;
    }
    log(`⚡ Sending all funds minus fee: ${(sendSats/1e8).toFixed(8)} BTC`, "warn");
  }
  log("Preparing transaction...");
  const network = bitcoinjs.networks.bitcoin;
  let psbt = new bitcoinjs.Psbt({ network });
  psbt.addInput({
    hash: utxotxid,
    index: utxovout,
    witnessUtxo: {
      script: Buffer.from(utxoscript, 'hex'),
      value: utxoamount
    }
  });
  psbt.addOutput({ address: to, value: sendSats });
  // Sign
  try {
    const keyPair = bitcoinjs.ECPair.fromWIF(wif, network);
    psbt.signInput(0, keyPair);
    psbt.finalizeAllInputs();
  } catch (e) {
    log("❌ Signing error: " + e.message, "err");
    return;
  }
  const txHex = psbt.extractTransaction().toHex();
  log("Transaction hex ready. Broadcasting...");
  // Broadcast
  try {
    const txid = await broadcastTx(txHex);
    log(`✅ Transaction sent! TXID: <a href="https://mempool.space/tx/${txid}" target="_blank">${txid}</a>`, "ok");
  } catch (e) {
    log("❌ Broadcast error: " + e.message, "err");
  }
}
</script>
</body>
</html>